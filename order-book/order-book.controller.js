'use strict';const a106_0x11e4a2=a106_0x3c44;function a106_0x3c44(_0x244da3,_0x6a9bbf){const _0x46fb5b=a106_0x46fb();return a106_0x3c44=function(_0x3c444a,_0x3342a4){_0x3c444a=_0x3c444a-0xb9;let _0x2c4975=_0x46fb5b[_0x3c444a];return _0x2c4975;},a106_0x3c44(_0x244da3,_0x6a9bbf);}function a106_0x46fb(){const _0x192a4a=['ApiTags','name','../user/schema/user.schema','Order\x20not\x20found.','createFixedOrder','UseGuards','11XQVeiZ','1677984stZRRo','Post','MessageResponse','order-book-settings','../auth/decorator/roles.decorator','Order\x20canceled\x20successfully.','findAll','Settings\x20not\x20found.','__esModule','./schema/order.schema','./dto/get-orders.dto','./dto/create-order.dto','UserId','MongoIdDto','Controller','115476KKGvaY','getMyOrders','settingsService','3609140cbMQCX','update','OrderBookService','orderBookService','__decorate','../auth/guard/roles.guard','391145ynaVdB','create','Get','logger','getOrders','design:type','Patch','createSettings','../common/mongo-id.dto','Settings\x20already\x20exists.','ApiBearerAuth','length','priceType','Order\x20book\x20module\x20license\x20is\x20expired.','__param','ApiCreatedResponse','Query','metadata','Role','GetOrdersRes','log','2578254ypLPpv','OrderBook','checkLicense','decorate','./dto/update-order-book-settings.dto','Body','design:paramtypes','ApiNotFoundResponse','cancelOrder','ServiceUnavailableException','updateSettings','getSettings','GetOrderBookSettingsRes','Roles','SettingsService','order-book-settings/:id','function','./order-book.service','cancel-order/:id','20kzdLAX','ApiOkResponse','747694ZMZDVg','8lpqUjh','OrderBookController','Admin','VIPUser','prototype','includes','User','1880982HgAeiS','order-book','1bRGlcV','createMarketOrderOrder','Settings\x20updated\x20successfully.','_id','object','../settings/settings.service','PriceType','CreateOrderDto','Fixed','./dto/create-order-book-settings.dto','design:returntype','Logger','Order\x20created\x20successfully.','SuperAdmin','settings','RolesGuard','Settings\x20created\x20successfully.'];a106_0x46fb=function(){return _0x192a4a;};return a106_0x46fb();}(function(_0x3fa447,_0x7a9161){const _0x3e22ce=a106_0x3c44,_0x257dc8=_0x3fa447();while(!![]){try{const _0x10e063=-parseInt(_0x3e22ce(0x116))/0x1*(parseInt(_0x3e22ce(0x10c))/0x2)+-parseInt(_0x3e22ce(0xd9))/0x3*(-parseInt(_0x3e22ce(0x10a))/0x4)+-parseInt(_0x3e22ce(0xe2))/0x5+parseInt(_0x3e22ce(0xca))/0x6+-parseInt(_0x3e22ce(0xf7))/0x7*(parseInt(_0x3e22ce(0x10d))/0x8)+parseInt(_0x3e22ce(0x114))/0x9+parseInt(_0x3e22ce(0xdc))/0xa*(parseInt(_0x3e22ce(0xc9))/0xb);if(_0x10e063===_0x7a9161)break;else _0x257dc8['push'](_0x257dc8['shift']());}catch(_0x1210a8){_0x257dc8['push'](_0x257dc8['shift']());}}}(a106_0x46fb,0x361c6));var __decorate=this&&this[a106_0x11e4a2(0xe0)]||function(_0x1f52f0,_0x37a00c,_0xddec41,_0x47c7db){const _0x56fa3e=a106_0x11e4a2;var _0x55ada3=arguments[_0x56fa3e(0xed)],_0x331771=_0x55ada3<0x3?_0x37a00c:_0x47c7db===null?_0x47c7db=Object['getOwnPropertyDescriptor'](_0x37a00c,_0xddec41):_0x47c7db,_0x1f84f3;if(typeof Reflect===_0x56fa3e(0x11a)&&typeof Reflect[_0x56fa3e(0xfa)]==='function')_0x331771=Reflect['decorate'](_0x1f52f0,_0x37a00c,_0xddec41,_0x47c7db);else{for(var _0x37d9e5=_0x1f52f0[_0x56fa3e(0xed)]-0x1;_0x37d9e5>=0x0;_0x37d9e5--)if(_0x1f84f3=_0x1f52f0[_0x37d9e5])_0x331771=(_0x55ada3<0x3?_0x1f84f3(_0x331771):_0x55ada3>0x3?_0x1f84f3(_0x37a00c,_0xddec41,_0x331771):_0x1f84f3(_0x37a00c,_0xddec41))||_0x331771;}return _0x55ada3>0x3&&_0x331771&&Object['defineProperty'](_0x37a00c,_0xddec41,_0x331771),_0x331771;},__metadata=this&&this['__metadata']||function(_0x3bb167,_0x9c298c){const _0x317472=a106_0x11e4a2;if(typeof Reflect===_0x317472(0x11a)&&typeof Reflect['metadata']===_0x317472(0x107))return Reflect[_0x317472(0xf3)](_0x3bb167,_0x9c298c);},__param=this&&this[a106_0x11e4a2(0xf0)]||function(_0xe0fd89,_0x1a7b23){return function(_0x5eb84e,_0x2fb93a){_0x1a7b23(_0x5eb84e,_0x2fb93a,_0xe0fd89);};},OrderBookController_1;Object['defineProperty'](exports,a106_0x11e4a2(0xd2),{'value':!![]}),exports[a106_0x11e4a2(0x10e)]=void 0x0;const common_1=require('@nestjs/common'),swagger_1=require('@nestjs/swagger'),roles_decorator_1=require(a106_0x11e4a2(0xce)),user_id_decorator_1=require('../auth/decorator/user-id.decorator'),roles_guard_1=require(a106_0x11e4a2(0xe1)),message_response_1=require('../common/message-response'),mongo_id_dto_1=require(a106_0x11e4a2(0xea)),settings_service_1=require(a106_0x11e4a2(0x11b)),user_schema_1=require(a106_0x11e4a2(0xc5)),create_order_book_settings_dto_1=require(a106_0x11e4a2(0xbb)),create_order_dto_1=require(a106_0x11e4a2(0xd5)),get_order_book_settings_dto_1=require('./dto/get-order-book-settings.dto'),get_orders_dto_1=require(a106_0x11e4a2(0xd4)),update_order_book_settings_dto_1=require(a106_0x11e4a2(0xfb)),order_book_service_1=require(a106_0x11e4a2(0x108)),order_schema_1=require(a106_0x11e4a2(0xd3));let OrderBookController=OrderBookController_1=class OrderBookController{constructor(_0x142150,_0xd4a030){const _0x487ff5=a106_0x11e4a2;this[_0x487ff5(0xdf)]=_0x142150,this[_0x487ff5(0xdb)]=_0xd4a030,this[_0x487ff5(0xe5)]=new common_1[(_0x487ff5(0xbd))](OrderBookController_1[_0x487ff5(0xc4)]);}async['checkLicense'](){const _0x80ba19=a106_0x11e4a2,{paidModules:_0xd428ef}=await this[_0x80ba19(0xdb)][_0x80ba19(0xc0)]();if(!_0xd428ef[_0x80ba19(0x112)](_0x80ba19(0xf8))){this[_0x80ba19(0xe5)][_0x80ba19(0xf6)](_0x80ba19(0xef));throw new common_1[(_0x80ba19(0x100))]();}}async[a106_0x11e4a2(0xe3)](_0x58b5d8,_0xb937a0){const _0x568647=a106_0x11e4a2;await this['checkLicense']();let _0x423442;if(_0x58b5d8[_0x568647(0xee)]==order_schema_1[_0x568647(0x11c)][_0x568647(0xba)])_0x423442=await this[_0x568647(0xdf)][_0x568647(0xc7)](_0x58b5d8,_0xb937a0);else _0x423442=await this[_0x568647(0xdf)][_0x568647(0x117)](_0x58b5d8,_0xb937a0);return{'message':_0x568647(0xbe),'id':_0x423442[_0x568647(0x119)]};}async[a106_0x11e4a2(0xff)](_0x4207bc,_0x394bf0){const _0x57a1f5=a106_0x11e4a2;return await this['checkLicense'](),await this[_0x57a1f5(0xdf)][_0x57a1f5(0xff)](_0x4207bc['id'],_0x394bf0),{'message':_0x57a1f5(0xcf)};}async[a106_0x11e4a2(0xe6)](_0x1e6f63){const _0x57935f=a106_0x11e4a2;return await this['checkLicense'](),this['orderBookService'][_0x57935f(0xe6)](_0x1e6f63);}async['getMyOrders'](_0x3c4ceb,_0x436b25){const _0x2b1481=a106_0x11e4a2;return await this[_0x2b1481(0xf9)](),this[_0x2b1481(0xdf)][_0x2b1481(0xda)](_0x436b25,_0x3c4ceb);}async[a106_0x11e4a2(0xe9)](_0x4da7ff){const _0x511360=a106_0x11e4a2;await this[_0x511360(0xf9)]();const _0x214342=await this['orderBookService'][_0x511360(0xe9)](_0x4da7ff);return{'message':_0x511360(0xc2),'id':_0x214342[_0x511360(0x119)]};}async[a106_0x11e4a2(0xd0)](){const _0x555b34=a106_0x11e4a2;return await this[_0x555b34(0xf9)](),this['orderBookService'][_0x555b34(0x102)]();}async[a106_0x11e4a2(0xdd)](_0x3e3f43,_0x1aa39f){const _0x3e1aa3=a106_0x11e4a2;return await this['checkLicense'](),await this[_0x3e1aa3(0xdf)][_0x3e1aa3(0x101)](_0x3e3f43['id'],_0x1aa39f),{'message':_0x3e1aa3(0x118)};}};exports[a106_0x11e4a2(0x10e)]=OrderBookController,__decorate([(0x0,common_1[a106_0x11e4a2(0xcb)])(),(0x0,swagger_1[a106_0x11e4a2(0xf1)])({'type':message_response_1[a106_0x11e4a2(0xcc)],'description':a106_0x11e4a2(0xbe)}),(0x0,swagger_1[a106_0x11e4a2(0xec)])(),(0x0,common_1[a106_0x11e4a2(0xc8)])(roles_guard_1[a106_0x11e4a2(0xc1)]),(0x0,roles_decorator_1[a106_0x11e4a2(0x104)])(user_schema_1[a106_0x11e4a2(0xf4)][a106_0x11e4a2(0x113)],user_schema_1[a106_0x11e4a2(0xf4)][a106_0x11e4a2(0x110)]),__param(0x0,(0x0,common_1[a106_0x11e4a2(0xfc)])()),__param(0x1,(0x0,user_id_decorator_1[a106_0x11e4a2(0xd6)])()),__metadata('design:type',Function),__metadata('design:paramtypes',[create_order_dto_1[a106_0x11e4a2(0xb9)],String]),__metadata(a106_0x11e4a2(0xbc),Promise)],OrderBookController[a106_0x11e4a2(0x111)],'create',null),__decorate([(0x0,common_1[a106_0x11e4a2(0xe8)])(a106_0x11e4a2(0x109)),(0x0,swagger_1[a106_0x11e4a2(0x10b)])({'type':message_response_1[a106_0x11e4a2(0xcc)],'description':a106_0x11e4a2(0xcf)}),(0x0,swagger_1[a106_0x11e4a2(0xfe)])({'description':a106_0x11e4a2(0xc6)}),(0x0,swagger_1[a106_0x11e4a2(0xec)])(),(0x0,common_1[a106_0x11e4a2(0xc8)])(roles_guard_1['RolesGuard']),(0x0,roles_decorator_1[a106_0x11e4a2(0x104)])(user_schema_1[a106_0x11e4a2(0xf4)]['User'],user_schema_1[a106_0x11e4a2(0xf4)][a106_0x11e4a2(0x110)]),__param(0x0,(0x0,common_1['Param'])()),__param(0x1,(0x0,user_id_decorator_1['UserId'])()),__metadata(a106_0x11e4a2(0xe7),Function),__metadata(a106_0x11e4a2(0xfd),[mongo_id_dto_1[a106_0x11e4a2(0xd7)],String]),__metadata('design:returntype',Promise)],OrderBookController[a106_0x11e4a2(0x111)],'cancelOrder',null),__decorate([(0x0,common_1[a106_0x11e4a2(0xe4)])(),(0x0,swagger_1[a106_0x11e4a2(0x10b)])({'type':get_orders_dto_1['GetOrdersRes']}),(0x0,swagger_1[a106_0x11e4a2(0xec)])(),(0x0,common_1[a106_0x11e4a2(0xc8)])(roles_guard_1[a106_0x11e4a2(0xc1)]),(0x0,roles_decorator_1[a106_0x11e4a2(0x104)])(user_schema_1[a106_0x11e4a2(0xf4)][a106_0x11e4a2(0xbf)],user_schema_1[a106_0x11e4a2(0xf4)]['Admin']),__param(0x0,(0x0,common_1['Query'])()),__metadata(a106_0x11e4a2(0xe7),Function),__metadata(a106_0x11e4a2(0xfd),[get_orders_dto_1['GetOrdersDto']]),__metadata(a106_0x11e4a2(0xbc),Promise)],OrderBookController['prototype'],a106_0x11e4a2(0xe6),null),__decorate([(0x0,common_1['Get'])('me'),(0x0,swagger_1[a106_0x11e4a2(0x10b)])({'type':get_orders_dto_1[a106_0x11e4a2(0xf5)]}),(0x0,swagger_1[a106_0x11e4a2(0xec)])(),(0x0,common_1[a106_0x11e4a2(0xc8)])(roles_guard_1['RolesGuard']),(0x0,roles_decorator_1[a106_0x11e4a2(0x104)])(user_schema_1[a106_0x11e4a2(0xf4)][a106_0x11e4a2(0x113)],user_schema_1[a106_0x11e4a2(0xf4)][a106_0x11e4a2(0x110)]),__param(0x0,(0x0,common_1[a106_0x11e4a2(0xf2)])()),__param(0x1,(0x0,user_id_decorator_1[a106_0x11e4a2(0xd6)])()),__metadata('design:type',Function),__metadata('design:paramtypes',[get_orders_dto_1['GetMyOrdersDto'],String]),__metadata(a106_0x11e4a2(0xbc),Promise)],OrderBookController[a106_0x11e4a2(0x111)],a106_0x11e4a2(0xda),null),__decorate([(0x0,common_1['Post'])(a106_0x11e4a2(0xcd)),(0x0,swagger_1[a106_0x11e4a2(0xf1)])({'type':message_response_1[a106_0x11e4a2(0xcc)],'description':a106_0x11e4a2(0xc2)}),(0x0,swagger_1['ApiConflictResponse'])({'description':a106_0x11e4a2(0xeb)}),(0x0,swagger_1[a106_0x11e4a2(0xec)])(),(0x0,common_1['UseGuards'])(roles_guard_1[a106_0x11e4a2(0xc1)]),(0x0,roles_decorator_1['Roles'])(user_schema_1[a106_0x11e4a2(0xf4)][a106_0x11e4a2(0xbf)],user_schema_1[a106_0x11e4a2(0xf4)]['Admin']),__param(0x0,(0x0,common_1[a106_0x11e4a2(0xfc)])()),__metadata(a106_0x11e4a2(0xe7),Function),__metadata(a106_0x11e4a2(0xfd),[create_order_book_settings_dto_1['CreateOrderBookSettingsDto']]),__metadata(a106_0x11e4a2(0xbc),Promise)],OrderBookController[a106_0x11e4a2(0x111)],a106_0x11e4a2(0xe9),null),__decorate([(0x0,common_1[a106_0x11e4a2(0xe4)])(a106_0x11e4a2(0xcd)),(0x0,swagger_1['ApiOkResponse'])({'type':get_order_book_settings_dto_1[a106_0x11e4a2(0x103)]}),(0x0,swagger_1[a106_0x11e4a2(0xec)])(),__metadata(a106_0x11e4a2(0xe7),Function),__metadata(a106_0x11e4a2(0xfd),[]),__metadata(a106_0x11e4a2(0xbc),Promise)],OrderBookController[a106_0x11e4a2(0x111)],a106_0x11e4a2(0xd0),null),__decorate([(0x0,common_1['Patch'])(a106_0x11e4a2(0x106)),(0x0,swagger_1['ApiOkResponse'])({'type':message_response_1[a106_0x11e4a2(0xcc)],'description':a106_0x11e4a2(0x118)}),(0x0,swagger_1['ApiNotFoundResponse'])({'description':a106_0x11e4a2(0xd1)}),(0x0,swagger_1[a106_0x11e4a2(0xec)])(),(0x0,common_1[a106_0x11e4a2(0xc8)])(roles_guard_1[a106_0x11e4a2(0xc1)]),(0x0,roles_decorator_1[a106_0x11e4a2(0x104)])(user_schema_1[a106_0x11e4a2(0xf4)][a106_0x11e4a2(0xbf)],user_schema_1['Role'][a106_0x11e4a2(0x10f)]),__param(0x0,(0x0,common_1['Param'])()),__param(0x1,(0x0,common_1['Body'])()),__metadata(a106_0x11e4a2(0xe7),Function),__metadata('design:paramtypes',[mongo_id_dto_1[a106_0x11e4a2(0xd7)],update_order_book_settings_dto_1['UpdateOrderBookSettingsDto']]),__metadata(a106_0x11e4a2(0xbc),Promise)],OrderBookController['prototype'],'update',null),exports['OrderBookController']=OrderBookController=OrderBookController_1=__decorate([(0x0,swagger_1[a106_0x11e4a2(0xc3)])(a106_0x11e4a2(0x115)),(0x0,common_1[a106_0x11e4a2(0xd8)])(a106_0x11e4a2(0x115)),__metadata('design:paramtypes',[order_book_service_1[a106_0x11e4a2(0xde)],settings_service_1[a106_0x11e4a2(0x105)]])],OrderBookController);