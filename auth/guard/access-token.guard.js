'use strict';const a12_0x5948e1=a12_0x4b4a;(function(_0x219648,_0x6835c5){const _0x365974=a12_0x4b4a,_0x53861f=_0x219648();while(!![]){try{const _0x4b1ec3=parseInt(_0x365974(0x1bc))/0x1+-parseInt(_0x365974(0x19c))/0x2+parseInt(_0x365974(0x19a))/0x3*(-parseInt(_0x365974(0x1c2))/0x4)+-parseInt(_0x365974(0x1a2))/0x5+parseInt(_0x365974(0x1b9))/0x6+-parseInt(_0x365974(0x19b))/0x7+parseInt(_0x365974(0x1bf))/0x8;if(_0x4b1ec3===_0x6835c5)break;else _0x53861f['push'](_0x53861f['shift']());}catch(_0x4dc1ec){_0x53861f['push'](_0x53861f['shift']());}}}(a12_0x35a6,0x81f55));function a12_0x35a6(){const _0x5161a6=['extractTokenFromHeader','split','jwtService','findOrThrow','canActivate','__decorate','Injectable','sub','Reflector','userService','configService','reflector','__metadata','authorization','getOwnPropertyDescriptor','4116912rRwnTY','metadata','getAllAndOverride','440589Dinqin','function','@nestjs/common','10857984dwgbwL','AccessTokenGuard','object','4SrLnYx','IS_PUBLIC_KEY','JwtService','@nestjs/config','JWT_ACCESS_SECRET','UserService','UnauthorizedException','1223484OiZUcK','1041586IkwBLn','1237394SfPsQj','design:paramtypes','user','@nestjs/jwt','length','getClass','3881785ZnGguS','decorate','__esModule','../decorator/public.decorator','../../user/user.service','getRequest','verifyAsync','get'];a12_0x35a6=function(){return _0x5161a6;};return a12_0x35a6();}var __decorate=this&&this[a12_0x5948e1(0x1af)]||function(_0x56c5e0,_0x1a1ff5,_0x562630,_0x3ca2cf){const _0x41dc0e=a12_0x5948e1;var _0x2398f4=arguments['length'],_0x2da951=_0x2398f4<0x3?_0x1a1ff5:_0x3ca2cf===null?_0x3ca2cf=Object[_0x41dc0e(0x1b8)](_0x1a1ff5,_0x562630):_0x3ca2cf,_0x163e3f;if(typeof Reflect===_0x41dc0e(0x1c1)&&typeof Reflect[_0x41dc0e(0x1a3)]==='function')_0x2da951=Reflect[_0x41dc0e(0x1a3)](_0x56c5e0,_0x1a1ff5,_0x562630,_0x3ca2cf);else{for(var _0x70b84e=_0x56c5e0[_0x41dc0e(0x1a0)]-0x1;_0x70b84e>=0x0;_0x70b84e--)if(_0x163e3f=_0x56c5e0[_0x70b84e])_0x2da951=(_0x2398f4<0x3?_0x163e3f(_0x2da951):_0x2398f4>0x3?_0x163e3f(_0x1a1ff5,_0x562630,_0x2da951):_0x163e3f(_0x1a1ff5,_0x562630))||_0x2da951;}return _0x2398f4>0x3&&_0x2da951&&Object['defineProperty'](_0x1a1ff5,_0x562630,_0x2da951),_0x2da951;},__metadata=this&&this[a12_0x5948e1(0x1b6)]||function(_0x4969bb,_0x490ae1){const _0x10252d=a12_0x5948e1;if(typeof Reflect==='object'&&typeof Reflect[_0x10252d(0x1ba)]===_0x10252d(0x1bd))return Reflect['metadata'](_0x4969bb,_0x490ae1);};Object['defineProperty'](exports,a12_0x5948e1(0x1a4),{'value':!![]}),exports[a12_0x5948e1(0x1c0)]=void 0x0;const common_1=require(a12_0x5948e1(0x1be)),config_1=require(a12_0x5948e1(0x196)),core_1=require('@nestjs/core'),jwt_1=require(a12_0x5948e1(0x19f)),user_service_1=require(a12_0x5948e1(0x1a6)),public_decorator_1=require(a12_0x5948e1(0x1a5));function a12_0x4b4a(_0x4f1784,_0xbc1217){const _0x35a67c=a12_0x35a6();return a12_0x4b4a=function(_0x4b4a42,_0xe12aa4){_0x4b4a42=_0x4b4a42-0x195;let _0x32050a=_0x35a67c[_0x4b4a42];return _0x32050a;},a12_0x4b4a(_0x4f1784,_0xbc1217);}let AccessTokenGuard=class AccessTokenGuard{constructor(_0x662910,_0x532225,_0x434895,_0x308cc2){const _0x3f66a8=a12_0x5948e1;this[_0x3f66a8(0x1ac)]=_0x662910,this[_0x3f66a8(0x1b5)]=_0x532225,this[_0x3f66a8(0x1b4)]=_0x434895,this[_0x3f66a8(0x1b3)]=_0x308cc2;}async[a12_0x5948e1(0x1ae)](_0x268372){const _0x4341f3=a12_0x5948e1,_0x47e19d=this[_0x4341f3(0x1b5)][_0x4341f3(0x1bb)](public_decorator_1[_0x4341f3(0x1c3)],[_0x268372['getHandler'](),_0x268372[_0x4341f3(0x1a1)]()]);if(_0x47e19d)return!![];const _0x1d430e=_0x268372['switchToHttp']()[_0x4341f3(0x1a7)](),_0x2a1e00=this['extractTokenFromHeader'](_0x1d430e);if(!_0x2a1e00)throw new common_1[(_0x4341f3(0x199))]();try{const _0x6ddb41=await this[_0x4341f3(0x1ac)][_0x4341f3(0x1a8)](_0x2a1e00,{'secret':this[_0x4341f3(0x1b4)][_0x4341f3(0x1a9)](_0x4341f3(0x197))});await this['userService'][_0x4341f3(0x1ad)](_0x6ddb41[_0x4341f3(0x1b1)]),_0x1d430e[_0x4341f3(0x19e)]=_0x6ddb41;}catch(_0x33fd2d){throw new common_1[(_0x4341f3(0x199))]();}return!![];}[a12_0x5948e1(0x1aa)](_0x2ce170){const _0x492f2b=a12_0x5948e1;var _0x7fc0b7,_0x512c9c;const [_0x47032a,_0x4c9d5d]=(_0x512c9c=(_0x7fc0b7=_0x2ce170['headers'][_0x492f2b(0x1b7)])===null||_0x7fc0b7===void 0x0?void 0x0:_0x7fc0b7[_0x492f2b(0x1ab)]('\x20'))!==null&&_0x512c9c!==void 0x0?_0x512c9c:[];return _0x47032a==='Bearer'?_0x4c9d5d:undefined;}};exports[a12_0x5948e1(0x1c0)]=AccessTokenGuard,exports[a12_0x5948e1(0x1c0)]=AccessTokenGuard=__decorate([(0x0,common_1[a12_0x5948e1(0x1b0)])(),__metadata(a12_0x5948e1(0x19d),[jwt_1[a12_0x5948e1(0x195)],core_1[a12_0x5948e1(0x1b2)],config_1['ConfigService'],user_service_1[a12_0x5948e1(0x198)]])],AccessTokenGuard);