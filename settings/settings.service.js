'use strict';const a151_0x104008=a151_0x31bb;function a151_0x31bb(_0x597f42,_0x39a219){const _0x3a67d1=a151_0x3a67();return a151_0x31bb=function(_0x31bb76,_0x597203){_0x31bb76=_0x31bb76-0x6e;let _0x29c6ba=_0x3a67d1[_0x31bb76];return _0x29c6ba;},a151_0x31bb(_0x597f42,_0x39a219);}(function(_0x5de584,_0x423c96){const _0xeb53ae=a151_0x31bb,_0x3c2481=_0x5de584();while(!![]){try{const _0x50b754=parseInt(_0xeb53ae(0xb6))/0x1+-parseInt(_0xeb53ae(0x9a))/0x2*(parseInt(_0xeb53ae(0x9f))/0x3)+parseInt(_0xeb53ae(0x7c))/0x4*(-parseInt(_0xeb53ae(0xae))/0x5)+-parseInt(_0xeb53ae(0xb0))/0x6+-parseInt(_0xeb53ae(0xa0))/0x7+-parseInt(_0xeb53ae(0x76))/0x8*(-parseInt(_0xeb53ae(0xb5))/0x9)+parseInt(_0xeb53ae(0x80))/0xa*(parseInt(_0xeb53ae(0x82))/0xb);if(_0x50b754===_0x423c96)break;else _0x3c2481['push'](_0x3c2481['shift']());}catch(_0x4516bf){_0x3c2481['push'](_0x3c2481['shift']());}}}(a151_0x3a67,0xe5506));var __decorate=this&&this[a151_0x104008(0xab)]||function(_0x23188d,_0x214f83,_0x1f8011,_0x370960){const _0x1ecbc1=a151_0x104008;var _0x64fcde=arguments[_0x1ecbc1(0x7a)],_0x4bb76e=_0x64fcde<0x3?_0x214f83:_0x370960===null?_0x370960=Object[_0x1ecbc1(0x86)](_0x214f83,_0x1f8011):_0x370960,_0x3d7bac;if(typeof Reflect===_0x1ecbc1(0x94)&&typeof Reflect['decorate']===_0x1ecbc1(0x8f))_0x4bb76e=Reflect[_0x1ecbc1(0x6f)](_0x23188d,_0x214f83,_0x1f8011,_0x370960);else{for(var _0x196945=_0x23188d[_0x1ecbc1(0x7a)]-0x1;_0x196945>=0x0;_0x196945--)if(_0x3d7bac=_0x23188d[_0x196945])_0x4bb76e=(_0x64fcde<0x3?_0x3d7bac(_0x4bb76e):_0x64fcde>0x3?_0x3d7bac(_0x214f83,_0x1f8011,_0x4bb76e):_0x3d7bac(_0x214f83,_0x1f8011))||_0x4bb76e;}return _0x64fcde>0x3&&_0x4bb76e&&Object[_0x1ecbc1(0x98)](_0x214f83,_0x1f8011,_0x4bb76e),_0x4bb76e;},__metadata=this&&this['__metadata']||function(_0x59c259,_0x1ec366){const _0x1f43d6=a151_0x104008;if(typeof Reflect==='object'&&typeof Reflect['metadata']===_0x1f43d6(0x8f))return Reflect[_0x1f43d6(0x90)](_0x59c259,_0x1ec366);},__param=this&&this['__param']||function(_0xcead63,_0x87f719){return function(_0x48215c,_0x12e163){_0x87f719(_0x48215c,_0x12e163,_0xcead63);};},__importDefault=this&&this[a151_0x104008(0xac)]||function(_0xf7259){const _0x5351f3=a151_0x104008;return _0xf7259&&_0xf7259[_0x5351f3(0xaa)]?_0xf7259:{'default':_0xf7259};},SettingsService_1;Object[a151_0x104008(0x98)](exports,'__esModule',{'value':!![]}),exports[a151_0x104008(0x92)]=void 0x0;const common_1=require(a151_0x104008(0x9d)),mongoose_1=require(a151_0x104008(0xa6)),schedule_1=require(a151_0x104008(0xa7)),axios_1=__importDefault(require(a151_0x104008(0x84))),mongoose_2=require(a151_0x104008(0xa2)),nestjs_i18n_1=require(a151_0x104008(0xb2)),external_apis_service_1=require(a151_0x104008(0x75)),settings_schema_1=require(a151_0x104008(0xad));let SettingsService=SettingsService_1=class SettingsService{constructor(_0x3eefd6,_0x5bb944,_0x2c2fa2){const _0x117338=a151_0x104008;this[_0x117338(0x8a)]=_0x3eefd6,this['i18n']=_0x5bb944,this[_0x117338(0x77)]=_0x2c2fa2,this['logger']=new common_1[(_0x117338(0x87))](SettingsService_1['name']);}async[a151_0x104008(0x95)](){const _0x170579=a151_0x104008;this[_0x170579(0x97)](),this[_0x170579(0x83)]();}async[a151_0x104008(0x83)](){const _0x32259d=a151_0x104008;var _0x1f6771;const _0xdbdb2b=_0x32259d(0x7b);let _0x46176d;try{const _0x2dc4ac=await axios_1[_0x32259d(0x89)]['get'](_0xdbdb2b,{'timeout':0x1388});_0x46176d=_0x2dc4ac['data'],await this[_0x32259d(0x8a)]['findOneAndUpdate']({},{'paidModules':(_0x46176d===null||_0x46176d===void 0x0?void 0x0:_0x46176d[_0x32259d(0xb7)])||[]});}catch(_0x1f3d31){this[_0x32259d(0x7e)][_0x32259d(0x70)](_0x32259d(0x71)+_0xdbdb2b+':\x20'+JSON['stringify']((_0x1f6771=_0x1f3d31['response'])===null||_0x1f6771===void 0x0?void 0x0:_0x1f6771[_0x32259d(0x99)],null,0x2)),await this[_0x32259d(0x8a)][_0x32259d(0x81)]({},{'paidModules':[]});}}async[a151_0x104008(0x97)](){const _0x562dd5=a151_0x104008,_0x468dab=await this[_0x562dd5(0x8a)]['findOne']()['lean']();if(!_0x468dab)try{const _0x3fa461=await this[_0x562dd5(0x8a)][_0x562dd5(0xa5)]({'minDepositAmount':0x30d40,'minWithdrawAmount':0x30d40,'title':_0x562dd5(0x78),'frontAppBaseUrl':_0x562dd5(0x7f),'userLevelingPeriod':0x1e,'userLeveling':settings_schema_1[_0x562dd5(0xa3)][_0x562dd5(0x7d)],'secondStepUserVerifyDocs':[],'onlineFirstStepUserVerifyEnabled':![],'offlineFirstStepUserVerifyEnabled':![],'secondStepUserVerifyEnabled':![],'paidModules':[],'scalpingPreventionPeriodInHours':0x18,'referralCountForGettingReward':0x0,'referralReward':0x0,'productReqPageDesc1':'','productReqPageDesc2':'','balanceTransPageDesc1':'','balanceTransPageDesc2':'','balanceTransPageDesc3':'','vandarGatewayIsActive':![],'vandarApiKey':'','paystarGatewayIsActive':![],'paystarApiKey':'','samanGatewayIsActive':![],'kavehnegarApiKey':'','kavehnegarAuthTemplate':'','kavehnegarTransferTemplate':'','jibitInquiryApiKey':'','jibitInquirySecretKey':'','autoTransferWithdraw':settings_schema_1['AutoTransferOption'][_0x562dd5(0xb1)],'autoTransferLimit':0x0,'paystarWalletId':'','paystarWalletPassword':'','paystarWalletRefreshToken':'','paystarWalletSignKey':'','vandarRefreshToken':'','vandarBussinesName':'','tradeableTransferIsActive':![],'idDepositIsActive':![],'manualTransactionConfirmation':![],'idDepositAccountOwnerName':'','giftCardIsActive':![],'stakeIsActive':![],'wallgoldToken':'','wallgoldBaseUrl':''});return this[_0x562dd5(0x7e)][_0x562dd5(0x8d)]('Default\x20setting\x20document\x20created'),_0x3fa461;}catch(_0x1c5f90){throw new Error(_0x562dd5(0x6e)+_0x1c5f90);}return _0x468dab;}[a151_0x104008(0x74)](){const _0x1a528f=a151_0x104008;return this[_0x1a528f(0x8a)][_0x1a528f(0xaf)]()['select'](_0x1a528f(0xa1))[_0x1a528f(0x85)]();}async[a151_0x104008(0x73)](_0x117f3d){const _0x40d6e7=a151_0x104008,{lightIconImage:_0x1f167a,lightLogoImage:_0x93a5d6,darkIconImage:_0x2efe9f,darkLogoImage:_0x269ded,minDepositAmount:_0x1120eb,minWithdrawAmount:_0x59a997,title:_0x2457a6,frontAppBaseUrl:_0x563f68,scalpingPreventionPeriodInHours:_0x172a20,secondStepUserVerifyDocs:_0x45fff6,secondStepUserVerifyEnabled:_0x486b49,userLevelingPeriod:_0x5db881,onlineFirstStepUserVerifyEnabled:_0x235f59,offlineFirstStepUserVerifyEnabled:_0x105cdf,appOwnerCardNumber:_0x41c8c7,appOwnerIban:_0x1f3797,cardOwnerName:_0x58a8b7,userLeveling:_0x357713,referralCountForGettingReward:_0x44817e,referralReward:_0x3b2428,balanceTransPageDesc1:_0x2cd60e,balanceTransPageDesc2:_0x1d2a65,balanceTransPageDesc3:_0x4e0020,productReqPageDesc1:_0x5c14a5,productReqPageDesc2:_0x29e405,vandarGatewayIsActive:_0xbade70,vandarApiKey:_0x29e3e6,paystarGatewayIsActive:_0x29891f,paystarApiKey:_0x2ebac6,kavehnegarApiKey:_0x49a0be,jibitInquiryApiKey:_0x488641,jibitInquirySecretKey:_0x53efb2,autoTransferWithdraw:_0x36a2ee,autoTransferLimit:_0x5460e6,paystarWalletId:_0xc5e4d2,paystarWalletPassword:_0x2ab8dc,paystarWalletRefreshToken:_0x41e55b,paystarWalletSignKey:_0x4f9f97,vandarRefreshToken:_0x235ff7,vandarBussinesName:_0x449c38,payLaterLimit:_0x4b36f4,payLaterDeadlineHours:_0x12a323,kavehnegarAuthTemplate:_0x50fa84,kavehnegarTransferTemplate:_0x108363,vandarAccessToken:_0x435c19,tradeableTransferIsActive:_0x5e27d9,vandarIDDepositsLastCheckedTime:_0x4c4fc5,idDepositIsActive:_0x32595e,idDepositAccountOwnerName:_0x28453b,termsAndConditions:_0x5aa0db,manualTransactionConfirmation:_0x52b327,factorSignatureImage:_0x5182ad,samanGatewayIsActive:_0x3d0c28,samanTerminalId:_0x3717a6,giftCardIsActive:_0x266264,stakeIsActive:_0x3e8ce2,wallgoldToken:_0x3ece08,wallgoldBaseUrl:_0x3a00f4,zarbahaUsername:_0x3ef79a,zarbahaPassword:_0x42e43f}=_0x117f3d,_0x232ead=await this[_0x40d6e7(0x8a)][_0x40d6e7(0x81)]({},{'lightIconImage':_0x1f167a,'lightLogoImage':_0x93a5d6,'darkIconImage':_0x2efe9f,'darkLogoImage':_0x269ded,'minDepositAmount':_0x1120eb,'minWithdrawAmount':_0x59a997,'title':_0x2457a6,'frontAppBaseUrl':_0x563f68,'userLevelingPeriod':_0x5db881,'userLeveling':_0x357713,'secondStepUserVerifyDocs':_0x45fff6,'onlineFirstStepUserVerifyEnabled':_0x235f59,'offlineFirstStepUserVerifyEnabled':_0x105cdf,'secondStepUserVerifyEnabled':_0x486b49,'appOwnerCardNumber':_0x41c8c7,'appOwnerIban':_0x1f3797,'cardOwnerName':_0x58a8b7,'scalpingPreventionPeriodInHours':_0x172a20,'referralCountForGettingReward':_0x44817e,'referralReward':_0x3b2428,'productReqPageDesc1':_0x5c14a5,'productReqPageDesc2':_0x29e405,'balanceTransPageDesc1':_0x2cd60e,'balanceTransPageDesc2':_0x1d2a65,'balanceTransPageDesc3':_0x4e0020,'vandarGatewayIsActive':_0xbade70,'vandarApiKey':_0x29e3e6,'paystarGatewayIsActive':_0x29891f,'paystarApiKey':_0x2ebac6,'samanGatewayIsActive':_0x3d0c28,'samanTerminalId':_0x3717a6,'kavehnegarApiKey':_0x49a0be,'kavehnegarAuthTemplate':_0x50fa84,'kavehnegarTransferTemplate':_0x108363,'jibitInquiryApiKey':_0x488641,'jibitInquirySecretKey':_0x53efb2,'autoTransferWithdraw':_0x36a2ee,'autoTransferLimit':_0x5460e6,'paystarWalletId':_0xc5e4d2,'paystarWalletPassword':_0x2ab8dc,'paystarWalletRefreshToken':_0x41e55b,'paystarWalletSignKey':_0x4f9f97,'vandarRefreshToken':_0x235ff7,'vandarAccessToken':_0x435c19,'vandarBussinesName':_0x449c38,'payLaterLimit':_0x4b36f4,'payLaterDeadlineHours':_0x12a323,'tradeableTransferIsActive':_0x5e27d9,'idDepositIsActive':_0x32595e,'manualTransactionConfirmation':_0x52b327,'vandarIDDepositsLastCheckedTime':_0x4c4fc5,'idDepositAccountOwnerName':_0x28453b,'factorSignatureImage':_0x5182ad,'termsAndConditions':_0x5aa0db,'giftCardIsActive':_0x266264,'stakeIsActive':_0x3e8ce2,'wallgoldToken':_0x3ece08,'wallgoldBaseUrl':_0x3a00f4,'zarbahaUsername':_0x3ef79a,'zarbahaPassword':_0x42e43f},{'new':!![]})['select'](_0x40d6e7(0xa1))[_0x40d6e7(0x85)]();return _0x232ead;}async[a151_0x104008(0xa9)](){const _0x57f2b2=a151_0x104008;var _0x35f419;const {vandarRefreshToken:_0x451588}=await this[_0x57f2b2(0x74)]();if(_0x451588)try{const {accessToken:_0x2b6d39,refreshToken:_0x5901ca}=await this['externalApisService'][_0x57f2b2(0x96)](_0x451588);await this[_0x57f2b2(0x73)]({'vandarAccessToken':_0x2b6d39,'vandarRefreshToken':_0x5901ca});}catch(_0x1d891e){this[_0x57f2b2(0x7e)][_0x57f2b2(0xb3)](_0x57f2b2(0x93)+(((_0x35f419=_0x1d891e[_0x57f2b2(0x8b)])===null||_0x35f419===void 0x0?void 0x0:_0x35f419['data'])||_0x1d891e));throw new common_1[(_0x57f2b2(0x9c))]();}}};exports[a151_0x104008(0x92)]=SettingsService,__decorate([(0x0,schedule_1['Cron'])(schedule_1[a151_0x104008(0x8e)][a151_0x104008(0x8c)]),__metadata(a151_0x104008(0x88),Function),__metadata(a151_0x104008(0xa4),[]),__metadata(a151_0x104008(0x9e),Promise)],SettingsService['prototype'],'checkLicenses',null),exports[a151_0x104008(0x92)]=SettingsService=SettingsService_1=__decorate([(0x0,common_1['Injectable'])(),__param(0x0,(0x0,mongoose_1['InjectModel'])(settings_schema_1[a151_0x104008(0xa8)][a151_0x104008(0x72)])),__param(0x2,(0x0,common_1[a151_0x104008(0x79)])((0x0,common_1[a151_0x104008(0x9b)])(()=>external_apis_service_1[a151_0x104008(0x91)]))),__metadata(a151_0x104008(0xa4),[mongoose_2[a151_0x104008(0xb4)],nestjs_i18n_1['I18nService'],external_apis_service_1[a151_0x104008(0x91)]])],SettingsService);function a151_0x3a67(){const _0x5cd1f1=['16586RqAiaf','forwardRef','InternalServerErrorException','@nestjs/common','design:returntype','363bjTeqC','10041717vdBhtK','-_id','mongoose','UserLevelingOption','design:paramtypes','create','@nestjs/mongoose','@nestjs/schedule','Settings','updateVandarTokens','__esModule','__decorate','__importDefault','./schema/settings.schema','250YlILlX','findOne','3231408tiLLqF','Deactive','nestjs-i18n','error','Model','8118702PORayh','813308kcBnOw','modules','Failed\x20to\x20create\x20default\x20setting:\x20','decorate','warn','Error\x20in\x20getting\x20orderBook\x20license\x20','name','update','settings','../external-apis/external-apis.service','8puJLYw','externalApisService','SiteName','Inject','length','https://apis.viraasr.com/checkLicence','6648QFCiTY','Transaction','logger','https://<frontUrl>','96760HfcnRN','findOneAndUpdate','2596vKNUzC','checkLicenses','axios','lean','getOwnPropertyDescriptor','Logger','design:type','default','settingsModel','response','EVERY_DAY_AT_10AM','log','CronExpression','function','metadata','ExternalApisService','SettingsService','Error\x20in\x20updateVandarToken:\x20','object','onModuleInit','getVandarTokens','createDefaultSettings','defineProperty','data'];a151_0x3a67=function(){return _0x5cd1f1;};return a151_0x3a67();}